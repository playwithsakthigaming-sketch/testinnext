{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/news/edit/%5Bid%5D/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { revalidatePath } from 'next/cache';\nimport type { NewsArticle, NewsData } from '@/lib/news-articles';\nimport type { ImagePlaceholder } from '@/lib/placeholder-images';\n\nconst formSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  author: z.string().min(1, 'Author is required'),\n  imageUrl: z.string().url('Must be a valid URL'),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\nexport type NewsArticleWithImage = NewsArticle & { imageUrl: string };\n\n\nconst newsFilePath = path.join(process.cwd(), 'src', 'lib', 'news-articles.json');\nconst imagesFilePath = path.join(process.cwd(), 'src', 'lib', 'placeholder-images.json');\n\n\nasync function readJsonFile<T>(filePath: string): Promise<T> {\n    const fileContent = await fs.readFile(filePath, 'utf-8');\n    return JSON.parse(fileContent);\n}\n\nasync function writeJsonFile(filePath: string, data: any): Promise<void> {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n}\n\nexport async function getNewsArticle(id: string): Promise<NewsArticleWithImage | undefined> {\n    const newsData = await readJsonFile<NewsData>(newsFilePath);\n    const article = newsData.newsletters.find((article) => article.id === id);\n\n    if (!article) return undefined;\n\n    const imagesData = await readJsonFile<{ placeholderImages: ImagePlaceholder[] }>(imagesFilePath);\n    const image = imagesData.placeholderImages.find(img => img.id === article.imageId);\n\n    return {\n        ...article,\n        imageUrl: image?.imageUrl || '',\n    };\n}\n\nexport async function updateNewsArticle(id: string, values: FormValues) {\n  const validation = formSchema.safeParse(values);\n  if (!validation.success) {\n    return { success: false, message: 'Invalid data provided.' };\n  }\n\n  try {\n    const newsData = await readJsonFile<NewsData>(newsFilePath);\n    const imagesData = await readJsonFile<{ placeholderImages: ImagePlaceholder[] }>(imagesFilePath);\n    \n    const articleIndex = newsData.newsletters.findIndex((article) => article.id === id);\n    if (articleIndex === -1) {\n        return { success: false, message: 'Article not found.' };\n    }\n\n    // Update article details\n    newsData.newsletters[articleIndex] = {\n        ...newsData.newsletters[articleIndex],\n        title: validation.data.title,\n        author: validation.data.author,\n    };\n\n    // Update image details\n    const imageIndex = imagesData.placeholderImages.findIndex(img => img.id === newsData.newsletters[articleIndex].imageId);\n    if (imageIndex !== -1) {\n        imagesData.placeholderImages[imageIndex].imageUrl = validation.data.imageUrl;\n        imagesData.placeholderImages[imageIndex].description = `Image for ${validation.data.title}`;\n    }\n\n    await writeJsonFile(newsFilePath, newsData);\n    await writeJsonFile(imagesFilePath, imagesData);\n\n    revalidatePath('/admin/news');\n    revalidatePath('/');\n    revalidatePath(`/admin/news/edit/${id}`);\n    \n    return { success: true };\n  } catch (error) {\n    console.error('Error updating news article:', error);\n    return { success: false, message: 'Failed to write to data files.' };\n  }\n}\n"],"names":[],"mappings":";;;;;;IA+CsB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/news/edit/%5Bid%5D/edit-news-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { updateNewsArticle, type NewsArticleWithImage } from \"./actions\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\nimport Link from \"next/link\";\n\nconst formSchema = z.object({\n  title: z.string().min(1, \"Title is required\"),\n  author: z.string().min(1, \"Author is required\"),\n  imageUrl: z.string().url(\"Must be a valid URL\"),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function EditNewsForm({ article }: { article: NewsArticleWithImage }) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n  const router = useRouter();\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: article.title,\n      author: article.author,\n      imageUrl: article.imageUrl,\n    },\n  });\n\n  async function onSubmit(values: FormValues) {\n    setIsSubmitting(true);\n    const result = await updateNewsArticle(article.id, values);\n    setIsSubmitting(false);\n\n    if (result.success) {\n      toast({\n        title: \"Success\",\n        description: \"News article updated successfully.\",\n      });\n      router.push(\"/admin/news\");\n      router.refresh(); \n    } else {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: result.message || \"An error occurred.\",\n      });\n    }\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n        <FormField\n          control={form.control}\n          name=\"title\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Title</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Enter article title\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"author\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Author</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Enter author's name\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"imageUrl\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Banner Image URL</FormLabel>\n              <FormControl>\n                <Input placeholder=\"https://example.com/image.png\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <div className=\"flex justify-end gap-4\">\n            <Button variant=\"outline\" asChild>\n                <Link href=\"/admin/news\">Cancel</Link>\n            </Button>\n            <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? <><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />Saving...</> : \"Save Changes\"}\n            </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/app/current-year.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\nexport function CurrentYear() {\n    const [year, setYear] = useState<number | null>(null);\n\n    useEffect(() => {\n        setYear(new Date().getFullYear());\n    }, []);\n\n    if (!year) {\n        // Return a placeholder or null to avoid hydration mismatch\n        return null;\n    }\n\n    return <span>{year}</span>;\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIO,SAAS;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEhD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,QAAQ,IAAI,OAAO,WAAW;IAClC,GAAG,EAAE;IAEL,IAAI,CAAC,MAAM;QACP,2DAA2D;QAC3D,OAAO;IACX;IAEA,qBAAO,8OAAC;kBAAM;;;;;;AAClB","debugId":null}}]
}