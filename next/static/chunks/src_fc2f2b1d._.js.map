{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/news/edit/%5Bid%5D/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { revalidatePath } from 'next/cache';\nimport type { NewsArticle, NewsData } from '@/lib/news-articles';\n\nconst formSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  author: z.string().min(1, 'Author is required'),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nconst newsFilePath = path.join(process.cwd(), 'src', 'lib', 'news-articles.json');\n\nasync function readNewsFile(): Promise<NewsData> {\n    const fileContent = await fs.readFile(newsFilePath, 'utf-8');\n    return JSON.parse(fileContent);\n}\n\nasync function writeNewsFile(data: NewsData): Promise<void> {\n    await fs.writeFile(newsFilePath, JSON.stringify(data, null, 2));\n}\n\nexport async function getNewsArticle(id: string): Promise<NewsArticle | undefined> {\n    const data = await readNewsFile();\n    return data.newsletters.find((article) => article.id === id);\n}\n\nexport async function updateNewsArticle(id: string, values: FormValues) {\n  const validation = formSchema.safeParse(values);\n  if (!validation.success) {\n    return { success: false, message: 'Invalid data provided.' };\n  }\n\n  try {\n    const data = await readNewsFile();\n    const articleIndex = data.newsletters.findIndex((article) => article.id === id);\n\n    if (articleIndex === -1) {\n        return { success: false, message: 'Article not found.' };\n    }\n\n    data.newsletters[articleIndex] = {\n        ...data.newsletters[articleIndex],\n        title: validation.data.title,\n        author: validation.data.author,\n    };\n\n    await writeNewsFile(data);\n\n    revalidatePath('/admin/news');\n    revalidatePath('/');\n    revalidatePath(`/admin/news/edit/${id}`);\n    \n    return { success: true };\n  } catch (error) {\n    console.error('Error updating news article:', error);\n    return { success: false, message: 'Failed to write to news file.' };\n  }\n}\n"],"names":[],"mappings":";;;;;;IA+BsB,oBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/news/edit/%5Bid%5D/edit-news-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { updateNewsArticle } from \"./actions\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport type { NewsArticle } from '@/lib/news-articles';\n\nconst formSchema = z.object({\n  title: z.string().min(1, \"Title is required\"),\n  author: z.string().min(1, \"Author is required\"),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function EditNewsForm({ article }: { article: NewsArticle }) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n  const router = useRouter();\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: article.title,\n      author: article.author,\n    },\n  });\n\n  async function onSubmit(values: FormValues) {\n    setIsSubmitting(true);\n    const result = await updateNewsArticle(article.id, values);\n    setIsSubmitting(false);\n\n    if (result.success) {\n      toast({\n        title: \"Success\",\n        description: \"News article updated successfully.\",\n      });\n      router.push(\"/admin/news\");\n      router.refresh(); \n    } else {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: result.message || \"An error occurred.\",\n      });\n    }\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n        <FormField\n          control={form.control}\n          name=\"title\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Title</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Enter article title\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"author\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Author</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Enter author's name\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <div className=\"flex justify-end gap-4\">\n            <Button variant=\"outline\" asChild>\n                <Link href=\"/admin/news\">Cancel</Link>\n            </Button>\n            <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? <><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />Saving...</> : \"Save Changes\"}\n            </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AApBA;;;;;;;;;;;;;AAuBA,MAAM,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC5B;AAIO,SAAS,aAAa,EAAE,OAAO,EAA4B;;IAChE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,OAAO,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAc;QAC/B,UAAU,CAAA,GAAA,iKAAA,CAAA,cAAW,AAAD,EAAE;QACtB,eAAe;YACb,OAAO,QAAQ,KAAK;YACpB,QAAQ,QAAQ,MAAM;QACxB;IACF;IAEA,eAAe,SAAS,MAAkB;QACxC,gBAAgB;QAChB,MAAM,SAAS,MAAM,CAAA,GAAA,wLAAA,CAAA,oBAAiB,AAAD,EAAE,QAAQ,EAAE,EAAE;QACnD,gBAAgB;QAEhB,IAAI,OAAO,OAAO,EAAE;YAClB,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YACA,OAAO,IAAI,CAAC;YACZ,OAAO,OAAO;QAChB,OAAO;YACL,MAAM;gBACJ,SAAS;gBACT,OAAO;gBACP,aAAa,OAAO,OAAO,IAAI;YACjC;QACF;IACF;IAEA,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,6LAAC;YAAK,UAAU,KAAK,YAAY,CAAC;YAAW,WAAU;;8BACrD,6LAAC,mIAAA,CAAA,YAAS;oBACR,SAAS,KAAK,OAAO;oBACrB,MAAK;oBACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,6LAAC,mIAAA,CAAA,WAAQ;;8CACP,6LAAC,mIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,6LAAC,mIAAA,CAAA,cAAW;8CACV,cAAA,6LAAC,oIAAA,CAAA,QAAK;wCAAC,aAAY;wCAAuB,GAAG,KAAK;;;;;;;;;;;8CAEpD,6LAAC,mIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;8BAIlB,6LAAC,mIAAA,CAAA,YAAS;oBACR,SAAS,KAAK,OAAO;oBACrB,MAAK;oBACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,6LAAC,mIAAA,CAAA,WAAQ;;8CACP,6LAAC,mIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,6LAAC,mIAAA,CAAA,cAAW;8CACV,cAAA,6LAAC,oIAAA,CAAA,QAAK;wCAAC,aAAY;wCAAuB,GAAG,KAAK;;;;;;;;;;;8CAEpD,6LAAC,mIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;8BAIlB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,OAAO;sCAC7B,cAAA,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;0CAAc;;;;;;;;;;;sCAE7B,6LAAC,qIAAA,CAAA,SAAM;4BAAC,MAAK;4BAAS,UAAU;sCAC3B,6BAAe;;kDAAE,6LAAC,oNAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;oCAA8B;;+CAAe;;;;;;;;;;;;;;;;;;;;;;;AAMlG;GA1EgB;;QAEI,+HAAA,CAAA,WAAQ;QACX,qIAAA,CAAA,YAAS;QAEX,iKAAA,CAAA,UAAO;;;KALN","debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/app/current-year.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\nexport function CurrentYear() {\n    const [year, setYear] = useState<number | null>(null);\n\n    useEffect(() => {\n        setYear(new Date().getFullYear());\n    }, []);\n\n    if (!year) {\n        // Return a placeholder or null to avoid hydration mismatch\n        return null;\n    }\n\n    return <span>{year}</span>;\n}\n"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAIO,SAAS;;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEhD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACN,QAAQ,IAAI,OAAO,WAAW;QAClC;gCAAG,EAAE;IAEL,IAAI,CAAC,MAAM;QACP,2DAA2D;QAC3D,OAAO;IACX;IAEA,qBAAO,6LAAC;kBAAM;;;;;;AAClB;GAbgB;KAAA","debugId":null}}]
}