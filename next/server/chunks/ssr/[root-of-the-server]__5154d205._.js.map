{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/schemas.ts"],"sourcesContent":["\nimport { z } from 'zod';\n\nexport const loginSchema = z.object({\n  email: z.string().min(1, 'Email or Profile URL is required'),\n  password: z.string().min(1, 'Password is required'),\n});\n\nexport type LoginFormData = z.infer<typeof loginSchema>;\n"],"names":[],"mappings":";;;AACA;;AAEO,MAAM,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/login/actions.ts"],"sourcesContent":["\n'use server';\n\nimport type { LoginFormData } from '@/lib/schemas';\nimport { loginSchema } from '@/lib/schemas';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport type { ApplicationsData, Application } from '@/lib/applications';\n\nconst applicationsFilePath = path.join(process.cwd(), 'src', 'lib', 'applications.json');\n\nasync function readApplications(): Promise<ApplicationsData> {\n    try {\n        const data = await fs.readFile(applicationsFilePath, 'utf-8');\n        return JSON.parse(data);\n    } catch (error) {\n        if ((error as NodeJS.ErrnoException).code === 'ENOENT') {\n            return { applications: [] };\n        }\n        throw error;\n    }\n}\n\nexport type LoginResult = {\n    success: boolean;\n    message: string;\n};\n\nexport async function loginAction(data: LoginFormData): Promise<LoginResult> {\n    const validation = loginSchema.safeParse(data);\n    if (!validation.success) {\n        return { success: false, message: 'Invalid data provided.' };\n    }\n\n    const { email: identifier, password } = validation.data;\n\n    try {\n        const applicationsData = await readApplications();\n        let application: Application | undefined;\n\n        const isUrl = identifier.startsWith('http');\n        \n        if (isUrl) {\n            application = applicationsData.applications.find(app => \n                app.truckersmpUrl?.toLowerCase() === identifier.toLowerCase() ||\n                `https://truckershub.in/profile/${app.truckershubId}`.toLowerCase() === identifier.toLowerCase()\n            );\n        } else {\n             application = applicationsData.applications.find(app => app.email.toLowerCase() === identifier.toLowerCase());\n        }\n\n\n        if (!application) {\n            return { success: false, message: 'No application found for this identifier.' };\n        }\n        \n        if (application.password !== password) {\n            return { success: false, message: 'Incorrect password.' };\n        }\n\n        if (application.status === 'Accepted') {\n            return { success: true, message: 'Login successful!' };\n        }\n        \n        if (application.status === 'Rejected') {\n            return { success: false, message: 'Your application has been rejected. Please contact support for more information.' };\n        }\n        \n        if (application.status === 'Pending') {\n            return { success: false, message: 'Your application is still pending review. Please check back later.' };\n        }\n\n        return { success: false, message: 'You do not have permission to log in.' };\n\n    } catch (error) {\n        console.error('Error during login:', error);\n        return { success: false, message: 'An internal server error occurred.' };\n    }\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;;;;;;;AAGA,MAAM,uBAAuB,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,OAAO;AAEpE,eAAe;IACX,IAAI;QACA,MAAM,OAAO,MAAM,qHAAA,CAAA,UAAE,CAAC,QAAQ,CAAC,sBAAsB;QACrD,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,IAAI,AAAC,MAAgC,IAAI,KAAK,UAAU;YACpD,OAAO;gBAAE,cAAc,EAAE;YAAC;QAC9B;QACA,MAAM;IACV;AACJ;AAOO,eAAe,YAAY,IAAmB;IACjD,MAAM,aAAa,qHAAA,CAAA,cAAW,CAAC,SAAS,CAAC;IACzC,IAAI,CAAC,WAAW,OAAO,EAAE;QACrB,OAAO;YAAE,SAAS;YAAO,SAAS;QAAyB;IAC/D;IAEA,MAAM,EAAE,OAAO,UAAU,EAAE,QAAQ,EAAE,GAAG,WAAW,IAAI;IAEvD,IAAI;QACA,MAAM,mBAAmB,MAAM;QAC/B,IAAI;QAEJ,MAAM,QAAQ,WAAW,UAAU,CAAC;QAEpC,IAAI,OAAO;YACP,cAAc,iBAAiB,YAAY,CAAC,IAAI,CAAC,CAAA,MAC7C,IAAI,aAAa,EAAE,kBAAkB,WAAW,WAAW,MAC3D,CAAC,+BAA+B,EAAE,IAAI,aAAa,EAAE,CAAC,WAAW,OAAO,WAAW,WAAW;QAEtG,OAAO;YACF,cAAc,iBAAiB,YAAY,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,KAAK,CAAC,WAAW,OAAO,WAAW,WAAW;QAC/G;QAGA,IAAI,CAAC,aAAa;YACd,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAA4C;QAClF;QAEA,IAAI,YAAY,QAAQ,KAAK,UAAU;YACnC,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAAsB;QAC5D;QAEA,IAAI,YAAY,MAAM,KAAK,YAAY;YACnC,OAAO;gBAAE,SAAS;gBAAM,SAAS;YAAoB;QACzD;QAEA,IAAI,YAAY,MAAM,KAAK,YAAY;YACnC,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAAmF;QACzH;QAEA,IAAI,YAAY,MAAM,KAAK,WAAW;YAClC,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAAqE;QAC3G;QAEA,OAAO;YAAE,SAAS;YAAO,SAAS;QAAwC;IAE9E,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YAAE,SAAS;YAAO,SAAS;QAAqC;IAC3E;AACJ;;;IAlDsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/login/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {loginAction as '40bdc630fe2dc98cd4178806c1a585c01b57d7960b'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/login/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/login/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/login/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/login/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/login/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/login/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsQ,GACnS,oCACA","debugId":null}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}